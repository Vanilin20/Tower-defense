# üíÄ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –∑–æ–Ω–∏ –ø—Ä–∏ —Å–º–µ—Ä—Ç—ñ –≥–µ—Ä–æ—è

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–æ–ª–∏ –≥–µ—Ä–æ–π –ø–æ–º–∏—Ä–∞—î, –∑–æ–Ω–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –∑–∞–π–Ω—è—Ç–æ—é —ñ –Ω–µ –º–æ–∂–µ –ø—Ä–∏–π–Ω—è—Ç–∏ –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è.

## üîß **–†—ñ—à–µ–Ω–Ω—è:**
–î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–º–µ—Ä—Ç—ñ –≥–µ—Ä–æ—è —Ç–∞ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –∑–æ–Ω–∏.

## üìä **–û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–∏:**

### **1. –ü–æ–¥—ñ—è —Å–º–µ—Ä—Ç—ñ –≥–µ—Ä–æ—è –≤ DeathHandler:**
```csharp
// –ü–æ–¥—ñ—è –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Å–º–µ—Ä—Ç—å –≥–µ—Ä–æ—è
public static System.Action<Unit> OnHeroDeath;

// –í HandleDeath()
if (unit.gameObject.CompareTag("Hero"))
{
    OnHeroDeath?.Invoke(unit);
}
```

### **2. –ü—ñ–¥–ø–∏—Å–∫–∞ –∑–æ–Ω–∏ –Ω–∞ –ø–æ–¥—ñ—é —Å–º–µ—Ä—Ç—ñ:**
```csharp
void Start()
{
    // –ü—ñ–¥–ø–∏—Å—É—î–º–æ—Å—è –Ω–∞ –ø–æ–¥—ñ—é —Å–º–µ—Ä—Ç—ñ –≥–µ—Ä–æ—è
    DeathHandler.OnHeroDeath += OnHeroDeath;
}

void OnDestroy()
{
    // –í—ñ–¥–ø–∏—Å—É—î–º–æ—Å—è –≤—ñ–¥ –ø–æ–¥—ñ—ó –ø—Ä–∏ –∑–Ω–∏—â–µ–Ω–Ω—ñ –∑–æ–Ω–∏
    DeathHandler.OnHeroDeath -= OnHeroDeath;
}

private void OnHeroDeath(Unit deadHero)
{
    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —Ü–µ –Ω–∞—à –≥–µ—Ä–æ–π
    if (currentHero != null && currentHero == deadHero.gameObject)
    {
        Debug.Log($"üíÄ –ì–µ—Ä–æ–π {deadHero.unitName} –ø–æ–º–µ—Ä, –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É {gameObject.name}");
        RemoveHero();
    }
}
```

### **3. –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –º–µ—Ç–æ–¥ RemoveHero:**
```csharp
public void RemoveHero()
{
    if (currentHero != null)
    {
        // –ó—É–ø–∏–Ω—è—î–º–æ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–º–µ—Ä—Ç—ñ
        StopAllCoroutines();
        
        // –ó–Ω–∏—â—É—î–º–æ –≥–µ—Ä–æ—è —è–∫—â–æ –≤—ñ–Ω —â–µ —ñ—Å–Ω—É—î
        if (currentHero != null)
        {
            Destroy(currentHero);
        }
    }

    currentHero = null;
    hasHero = false;
}
```

### **4. –ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞–Ω—É:**
```csharp
// –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –≥–µ—Ä–æ–π —â–µ –∂–∏–≤–∏–π
public bool IsHeroAlive()
{
    if (currentHero == null) return false;
    
    Unit heroUnit = currentHero.GetComponent<Unit>();
    return heroUnit != null && !heroUnit.isDead;
}

// –ü—Ä–∏–º—É—Å–æ–≤–æ –∑–≤—ñ–ª—å–Ω—è—î –∑–æ–Ω—É
public void ForceFreeZone()
{
    if (hasHero)
    {
        Debug.Log($"üîÑ –ü—Ä–∏–º—É—Å–æ–≤–æ –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É {gameObject.name}");
        RemoveHero();
    }
}
```

### **5. –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π TrySpawnHero:**
```csharp
private void TrySpawnHero()
{
    if (hasHero)
    {
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –≥–µ—Ä–æ–π —â–µ –∂–∏–≤–∏–π
        if (IsHeroAlive())
        {
            Debug.Log("‚ö†Ô∏è –í –∑–æ–Ω—ñ –≤–∂–µ —î –∂–∏–≤–∏–π –≥–µ—Ä–æ–π");
            return;
        }
        else
        {
            // –ì–µ—Ä–æ–π –ø–æ–º–µ—Ä, –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É
            Debug.Log("üíÄ –ì–µ—Ä–æ–π –≤ –∑–æ–Ω—ñ –ø–æ–º–µ—Ä, –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É");
            RemoveHero();
        }
    }
    // ... —Ä–µ—à—Ç–∞ –ª–æ–≥—ñ–∫–∏
}
```

## üéÆ **–°—Ü–µ–Ω–∞—Ä—ñ—ó —Ä–æ–±–æ—Ç–∏:**

### **–°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ù–æ—Ä–º–∞–ª—å–Ω–∞ —Å–º–µ—Ä—Ç—å –≥–µ—Ä–æ—è**
1. –ì–µ—Ä–æ–π –≤ –∑–æ–Ω—ñ –±'—î—Ç—å—Å—è –∑ –≤–æ—Ä–æ–≥–∞–º–∏
2. –ì–µ—Ä–æ–π –ø–æ–º–∏—Ä–∞—î
3. DeathHandler –≤–∏–∫–ª–∏–∫–∞—î –ø–æ–¥—ñ—é `OnHeroDeath`
4. –ó–æ–Ω–∞ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –≤–∏–∫–ª–∏–∫–∞—î `RemoveHero()`
5. –ó–æ–Ω–∞ —Å—Ç–∞—î –≤—ñ–ª—å–Ω–æ—é –¥–ª—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è

### **–°—Ü–µ–Ω–∞—Ä—ñ–π 2: –°–ø—Ä–æ–±–∞ —Å–ø–∞–≤–Ω—É –≤ –∑–∞–π–Ω—è—Ç—ñ–π –∑–æ–Ω—ñ**
1. –ì—Ä–∞–≤–µ—Ü—å –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –≥–µ—Ä–æ—è –≤ –∑–æ–Ω—É
2. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î `IsHeroAlive()`
3. –Ø–∫—â–æ –≥–µ—Ä–æ–π –º–µ—Ä—Ç–≤–∏–π - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≤—ñ–ª—å–Ω—è—î –∑–æ–Ω—É
4. –î–æ–∑–≤–æ–ª—è—î –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è

### **–°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ü—Ä–∏–º—É—Å–æ–≤–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è**
1. –í–∏–∫–ª–∏–∫ `ForceFreeZone()` –∑ –∫–æ–Ω—Å–æ–ª—ñ –∞–±–æ –∫–æ–¥—É
2. –ó–æ–Ω–∞ –ø—Ä–∏–º—É—Å–æ–≤–æ –∑–≤—ñ–ª—å–Ω—è—î—Ç—å—Å—è
3. –ú–æ–∂–Ω–∞ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è

## üîç **–í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó:**

### **–í –∫–æ–Ω—Å–æ–ª—ñ:**
```
üíÄ –ì–µ—Ä–æ–π Warrior –ø–æ–º–µ—Ä, –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É Zone_1
üóëÔ∏è –ì–µ—Ä–æ—è –≤–∏–¥–∞–ª–µ–Ω–æ –∑ –∑–æ–Ω–∏: Zone_1
üíÄ –ì–µ—Ä–æ–π –≤ –∑–æ–Ω—ñ –ø–æ–º–µ—Ä, –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É
üîÑ –ü—Ä–∏–º—É—Å–æ–≤–æ –∑–≤—ñ–ª—å–Ω—è—î–º–æ –∑–æ–Ω—É Zone_1
```

## ‚ö†Ô∏è **–í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è** - –∑–æ–Ω–∞ —Å–∞–º–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—î —Å–º–µ—Ä—Ç—å –≥–µ—Ä–æ—è
2. **–ü–æ–¥—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞** - –µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –ø–æ–¥—ñ—ó
3. **–ë–µ–∑–ø–µ—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è** - –ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É** - –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –≥–µ—Ä–æ–π –∂–∏–≤–∏–π
5. **–ü—Ä–∏–º—É—Å–æ–≤–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è** - –º–æ–∂–Ω–∞ –ø—Ä–∏–º—É—Å–æ–≤–æ –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ –∑–æ–Ω—É

## üß™ **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**

### **–¢–µ—Å—Ç 1: –°–º–µ—Ä—Ç—å –≥–µ—Ä–æ—è**
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –≥–µ—Ä–æ—è –≤ –∑–æ–Ω—ñ
2. –ê—Ç–∞–∫—É–π—Ç–µ –≥–µ—Ä–æ—è –¥–æ —Å–º–µ—Ä—Ç—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –∑–æ–Ω–∏
4. –°–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è

### **–¢–µ—Å—Ç 2: –ü—Ä–∏–º—É—Å–æ–≤–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è**
```csharp
// –í –∫–æ–Ω—Å–æ–ª—ñ Unity
Zone[] zones = FindObjectsByType<Zone>(FindObjectsSortMode.None);
zones[0].ForceFreeZone();
```

### **–¢–µ—Å—Ç 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É**
```csharp
// –í –∫–æ–Ω—Å–æ–ª—ñ Unity
Zone[] zones = FindObjectsByType<Zone>(FindObjectsSortMode.None);
Debug.Log($"–ì–µ—Ä–æ–π –∂–∏–≤–∏–π: {zones[0].IsHeroAlive()}");
```

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

–¢–µ–ø–µ—Ä –∑–æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≤—ñ–ª—å–Ω—è—é—Ç—å—Å—è –∫–æ–ª–∏ –≥–µ—Ä–æ–π –ø–æ–º–∏—Ä–∞—î, —â–æ –¥–æ–∑–≤–æ–ª—è—î:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞–≤–∏—Ç–∏ –Ω–æ–≤–∏—Ö –≥–µ—Ä–æ—ó–≤
- ‚úÖ –£–Ω–∏–∫–Ω—É—Ç–∏ "–∑–∞—Å—Ç—Ä—è–≥–ª–∏—Ö" –∑–æ–Ω
- ‚úÖ –ö—Ä–∞—â–∏–π –≥–µ–π–º–ø–ª–µ–π–Ω–∏–π –¥–æ—Å–≤—ñ–¥
- ‚úÖ –õ–µ–≥—à–µ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º 